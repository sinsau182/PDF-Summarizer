"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.CompletionsAPI = void 0;
const constants_1 = require("./constants");
const error_1 = require("./error");
const stream_1 = require("./stream");
class CompletionsAPI {
    constructor(client) {
        this.client = client;
    }
    async create(request, endpoint) {
        if (!this.client.headers.Authorization) {
            (0, error_1.throwOctoAITokenRequiredError)();
        }
        if (!endpoint) {
            endpoint = `${this.client.secureLink ? constants_1.SECURELINK_TEXT_GEN_API : constants_1.DEFAULT_TEXT_GEN_API}/completions`;
        }
        if (request.stream) {
            const response = await this.client.inferStream(endpoint, request);
            return stream_1.Stream.fromSSEResponse(response, new AbortController());
        }
        return this.client.infer(endpoint, request);
    }
}
exports.CompletionsAPI = CompletionsAPI;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tcGxldGlvbnMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvbGliL2NvbXBsZXRpb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQU1BLDJDQUE0RTtBQUM1RSxtQ0FBd0Q7QUFDeEQscUNBQWtDO0FBZ0JsQyxNQUFhLGNBQWM7SUFHekIsWUFBWSxNQUFjO1FBQ3hCLElBQUksQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDO0lBQ3ZCLENBQUM7SUFrRUQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFnQyxFQUFFLFFBQWlCO1FBQzlELElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUN2QyxJQUFBLHFDQUE2QixHQUFFLENBQUM7UUFDbEMsQ0FBQztRQUNELElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUNkLFFBQVEsR0FBRyxHQUNULElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxtQ0FBdUIsQ0FBQyxDQUFDLENBQUMsZ0NBQ3JELGNBQWMsQ0FBQztRQUNqQixDQUFDO1FBRUQsSUFBSSxPQUFPLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDbkIsTUFBTSxRQUFRLEdBQUcsTUFBTSxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFFbEUsT0FBTyxlQUFNLENBQUMsZUFBZSxDQUMzQixRQUFRLEVBQ1IsSUFBSSxlQUFlLEVBQUUsQ0FDdEIsQ0FBQztRQUNKLENBQUM7UUFFRCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUEyQixRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEUsQ0FBQztDQUNGO0FBNUZELHdDQTRGQyJ9